<section
	[attr.aria-describedby]="_id"
	class="fudis-expandable fudis-expandable__{{ variant }}"
	[class.fudis-expandable--collapsed]="_collapsed">
	<div class="fudis-expandable__header">
		<ng-container
			*ngTemplateOutlet="tag === 'h2' ? h2 : tag === 'h3' ? h3 : tag === 'h4' ? h4 : tag === 'h5' ? h5 : h6">
		</ng-container>
		<ng-container *ngIf="headerButtons">
			<div class="fudis-expandable__header__buttons">
				<ng-container *ngTemplateOutlet="headerButtons!.templateRef"></ng-container>
			</div>
		</ng-container>
	</div>
	<div class="fudis-expandable__content" *ngIf="openedOnce" [attr.aria-hidden]="_collapsed" [hidden]="_collapsed">
		<ng-container *ngTemplateOutlet="content!.templateRef"></ng-container>
	</div>
</section>
<ng-template #h2>
	<h2 [id]="_id" class="fudis-expandable__header__heading">
		<ng-container *ngTemplateOutlet="header"></ng-container>
	</h2>
</ng-template>

<ng-template #h3>
	<h3 [id]="_id" class="fudis-expandable__header__heading">
		<ng-container *ngTemplateOutlet="header"></ng-container>
	</h3>
</ng-template>

<ng-template #h4>
	<h4 [id]="_id" class="fudis-expandable__header__heading">
		<ng-container *ngTemplateOutlet="header"></ng-container>
	</h4>
</ng-template>

<ng-template #h5>
	<h5 [id]="_id" class="fudis-expandable__header__heading">
		<ng-container *ngTemplateOutlet="header"></ng-container>
	</h5>
</ng-template>

<ng-template #h6>
	<h6 [id]="_id" class="fudis-expandable__header__heading">
		<ng-container *ngTemplateOutlet="header"></ng-container>
	</h6>
</ng-template>

<ng-template #header>
	<button
		type="button"
		class="fudis-expandable__header__heading__button"
		[attr.aria-expanded]="!_collapsed"
		(click)="setCollapsedStatus(!_collapsed)">
		<fudis-icon icon="chevron-ring-fill" [rotate]="_collapsed ? 'none' : 'cw-90'"></fudis-icon>{{ title }}
		<span *ngIf="subTitle" class="fudis-expandable__header__heading__button__sub-heading">{{ subTitle }}</span>
	</button>
</ng-template>
