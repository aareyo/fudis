import {  Meta, Canvas } from '@storybook/blocks';
import * as ErrorMessageStories from './error-message.stories';

<Meta title="Components/Form/Error Message" />

# Error message

Fudis form components can implement two types of error messages. Fudis Validation Error Message is an internal error message used by [Fudis Validators](/docs/utilities-validators--documentation).
Also it is possible to add custom error message to Fudis form components through content projection. This requires the use of selector `fudis-error-message` when projecting content to another form component. 
Both types of error messages share the same design and are always rendered as a part [Guidance Component](/docs/components-guidance).
Read the following documentation on exceptions and on how to use multiple custom error messages at a single form component.

## Examples

<Canvas of={ErrorMessageStories.ErrorMessageExample}></Canvas>

## Usage Guidelines

### Mandatory Properties

The mandatory properties for error-message are `message` and `visible`. Error Message component takes a message parameter either as a string or as an observable string.
The property visible is a boolean value that determines when an error is displayed, but has no effect on the form's validity. In order for the error message alert icon to be displayed, 
the related form control must be in invalid state and passed to error message component in `visible` property.

````
<form [formGroup]="mainFormGroup">
	<fudis-text-input
	[control]="mainFormGroup.controls['required']"
	[label]="'Required text input'">
	<fudis-error-message
		[message]="'This is a custom error message has been added with content projection'"
		[visible]="true" />
</fudis-text-input>
</form>`
````
### Using multiple Errors Messages

**Note!** It is recommended to use only one Error Message at a time. When using multiple error messages it is mandatory to pass related form field id as `parentId` and a form field label as `parenLabel` input. 
These inputs are used for linking error message content with related input fields and with [Error Summary](/docs/components-form-error-summary--documentation).

### Error Message with Date Range component

When it is mandatory to target error message to a single Form Control in Date Range component, use `fudisDateStartError`and `fudisDateEndError` directives for selecting between start and end time inputs.

`````
<fudis-date-range [startDate]="startDate" [endDate]="endDate">
	<ng-template fudisDateStartError>
		<fudis-error-message [message]="'Backend threw an error on start date'" [visible]="true" />
	</ng-template>
	<ng-template fudisDateEndError>
		<fudis-error-message [message]="'Backend threw an error on end date'" [visible]="true" />
	</ng-template>
</fudis-date-range>
`````


## Accessibility

- Related Form field label and id are linked to error message
- Error Message is correctly passed to [Error Summary](/docs/components-form-error-summary--documentation).

## Related Components

- [Guidance Component](/docs/components-guidance)
- [Error Summary](/docs/components-form-error-summary--documentation)
