import {  Meta, Canvas } from '@storybook/blocks';
import * as ErrorMessageStories from './error-message.stories';

<Meta title="Components/Form/Error Message" />

# Error Message

Fudis form component's errors can be achieved in two ways:
- Through form control's validators: [Fudis Validators](/docs/utilities-validators--documentation).
- As a Error Message child component, for cases when using a validator or creating a custom one can be tricky.

This page is documentation for the latter Error Message component, which binds custom error message to Fudis form components through content projection.

This requires the use of selector `fudis-error-message`. Both Error Message and Fudis Validator errors create the same UI result and renders errors under the Guidance Component.

## Examples

<Canvas of={ErrorMessageStories.ErrorMessageExample}></Canvas>

## Currently Supported Form Components

- [Text Input](/docs/components-form-text-input--documentation)
- [Text Area](/docs/components-form-text-area--documentation)
- [Dropdown](/docs/components-form-dropdown--documentation)
- [Date Picker](/docs/components-form-date-datepicker--documentation)
- [Date Range](/docs/components-form-date-date-range--documentation)
- [Autocomplete (single-select)](/docs/components-form-autocomplete-single-select--documentation)
- [Input with Language Options](/docs/components-form-input-with-language-options--documentation)
- [Checkbox Group](/docs/components-form-checkbox-group--documentation)

## Usage Guidelines

### Mandatory Properties

The mandatory properties for Error Message are `message` and `visible`. 

When `visible` is true, it will adjust the parent's form control by binding a custom validator to it. This will trigger creation of `FudisValidatorErrorMessage` instance, which also sends error data to the Error Summary. If `visible` is set to false again, this will remove the added validator and also remove error from Error Summary.

Message parameter can be passed either as a string or as an observable string.

````
<fudis-text-input
	[control]="control"
	[label]="'Required text input'">
	<fudis-error-message
		[message]="'This is a custom error message has been added with content projection'"
		[visible]="errorExists" />
</fudis-text-input>
````
### Error Message with Date Range Component

When it is mandatory to target error message to a single Form Control in Date Range component, use `fudisDateStartError`and `fudisDateEndError` directives for selecting between start and end time inputs.

`````
<fudis-date-range [startDate]="startDate" [endDate]="endDate">
	<ng-template fudisDateStartError>
		<fudis-error-message [message]="'Error on the start date'" [visible]="startDateErrorCondition" />
	</ng-template>
	<ng-template fudisDateEndError>
		<fudis-error-message [message]="'Error on the end date'" [visible]="endDateErrorCondition" />
	</ng-template>
</fudis-date-range>
`````

## Accessibility

- Related Form field label and id are linked to error message
- Error Message is correctly passed to [Error Summary](/docs/components-form-error-summary--documentation).

## Related Components

- [Error Summary](/docs/components-form-error-summary--documentation)
- [Text Input](/docs/components-form-text-input--documentation)
- [Text Area](/docs/components-form-text-area--documentation)
- [Dropdown](/docs/components-form-dropdown--documentation)
- [Date Picker](/docs/components-form-date-datepicker--documentation)
- [Date Range](/docs/components-form-date-date-range--documentation)
- [Autocomplete (single-select)](/docs/components-form-autocomplete-single-select--documentation)
- [Input with Language Options](/docs/components-form-input-with-language-options--documentation)
- [Checkbox Group](/docs/components-form-checkbox-group--documentation)
