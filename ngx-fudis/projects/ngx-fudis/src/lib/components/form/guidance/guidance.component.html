<div class="fudis-guidance">
	<div [id]="for + '_guidance'">
		<div
			[attr.ariaLive]="ariaLive"
			[class.fudis-guidance__errors]="(control && control.touched) || (formGroup && formGroup.touched)">
			<!-- Check errors for control group of FormGroup e. g. english, finnish, swedish-->
			<ng-container *ngIf="formGroup?.controls && !control && !formGroup.errors">
				<ng-container *ngFor="let singleControl of formGroup.controls | keyvalue">
					<ng-container *ngIf="singleControl.value.errors">
						<ng-container *ngFor="let error of singleControl.value.errors | keyvalue">
							<fudis-error-message
								[focusId]="for"
								[visible]="singleControl.value.touched"
								[type]="error.key"
								[controlName]="singleControl.key"
								[label]="inputLabel"
								[message]="groupErrorMsg?.[singleControl.key]?.[asErrorkey(error?.key)]"></fudis-error-message>
						</ng-container>
					</ng-container>
				</ng-container>
			</ng-container>
			<!-- Check errors for FormGroup e. g. atLeastOneIsRequired -->
			<ng-container *ngIf="formGroup?.errors && formGroup.invalid">
				<ng-container *ngFor="let error of formGroup.errors | keyvalue">
					<fudis-error-message
						[visible]="formGroup.touched"
						[focusId]="for"
						[type]="error.key"
						[label]="inputLabel"
						[message]="groupErrorMsg?.[error.key]"></fudis-error-message>
				</ng-container>
			</ng-container>
			<!-- Check errors for single FormControl e. g. single text-input with maxlength error -->
			<ng-container *ngIf="control?.errors && !formGroup">
				<ng-container *ngFor="let error of control.errors | keyvalue">
					<fudis-error-message
						[visible]="control.touched"
						[focusId]="for"
						[label]="inputLabel"
						[type]="error.key"
						[message]="errorMsg?.[asErrorkey(error.key)]"></fudis-error-message>
				</ng-container>
			</ng-container>
			<ng-content></ng-content>
		</div>
		<p *ngIf="helpText" class="fudis-guidance__help-text">{{ helpText }}</p>
	</div>
	<small
		class="fudis-guidance__character-limit-indicator"
		[class.fudis-guidance__character-limit-indicator__float-right]="!helpText"
		*ngIf="maxLength">
		{{ control.value?.length || 0 }}/{{ maxLength }}
	</small>
</div>
<ng-container *ngIf="maxLength && maxLengthText && alertMaxLength()">
	<p class="fudis-visually-hidden" role="alert">{{ control.value?.length || 0 }}/{{ maxLength }} {{ maxLengthText }}</p>
</ng-container>
