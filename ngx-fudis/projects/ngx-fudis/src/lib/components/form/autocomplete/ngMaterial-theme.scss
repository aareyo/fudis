/* stylelint-disable property-disallowed-list */
/* stylelint-disable no-descending-specificity */
/* stylelint-disable declaration-no-important */
/* stylelint-disable scss/selector-no-redundant-nesting-selector */
/* stylelint-disable selector-max-class */
/* stylelint-disable selector-class-pattern */
@use '../../../foundations/typography/mixins.scss' as typography;
@use '../../../foundations/spacing/tokens.scss' as spacing;
@use '../../../foundations/borders/mixins.scss' as borders;
@use '../../../foundations/colors/mixins.scss' as colorMixins;
@use '../../../foundations/colors/tokens.scss' as colorTokens;

.fudis-autocomplete,
.fudis-dropdown {
	&__option-list {
		@include borders.border('1px', 'solid', 'gray-middle');
		@include colorMixins.bg-color('white');
	}

	&__option {
		// Reduce dropdown option list height
		&.mat-mdc-option {
			min-height: spacing.$spacing-lg;

			// Change dropdown option list typography
			& .mdc-list-item__primary-text {
				@include typography.body-text-md-regular;
			}
		}
	}
}

.fudis-dropdown {
	&__option {
		&.mat-mdc-option {
			// Change option hover color
			&:hover:not(.mdc-list-item--disabled) {
				@include colorMixins.bg-color('primary-light');
			}

			// Change option focus color
			&:focus:not(.mdc-list-item--disabled) {
				@include colorMixins.bg-color('primary-light');
			}

			// Change option color when navigating with keyboard arrows
			&.mat-mdc-option-active {
				@include colorMixins.bg-color('primary-light');
			}

			&.mat-mdc-option-active.mdc-list-item--selected {
				// Background-color mixin does not work in this particular case
				background-color: colorTokens.$color-primary-light !important;
			}

			&.mdc-list-item--selected .mdc-list-item__primary-text {
				@include colorMixins.text-color('gray-dark');
			}
		}
	}
}

.fudis-autocomplete {
	&__option {
		&.mat-mdc-option {
			// Change option hover color
			&:hover:not(.mdc-list-item--disabled) {
				@include colorMixins.bg-color('primary-light');
			}

			// Change option focus color
			&:focus:not(.mdc-list-item--disabled) {
				@include colorMixins.bg-color('primary-light');
			}

			// Change option color when navigating with keyboard arrows
			&.mat-mdc-option-active {
				// Background-color mixin does not work in this particular case
				background-color: colorTokens.$color-primary-light !important;
			}

			& .mdc-list-item__primary-text {
				// Display dropdown options in one line, without wrapping
				white-space: pre;
			}

			// NOTE: These styles are just a hack for reverting ngMaterial styles from selected option, which is really not selected.
			// The control value is null but somehow mat-autocomplete detects it as selected. Needs fixing.
			/* stylelint-disable-next-line selector-not-notation */
			&.mdc-list-item--selected:not(.mat-mdc-option-multiple):not(.mdc-list-item--disabled) {
				background: transparent;

				& .mdc-list-item__primary-text {
					@include colorMixins.text-color('gray-dark');
				}

				& mat-pseudo-checkbox {
					display: none;
				}
			}
		}
	}
}
