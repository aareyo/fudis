<div class="fudis-select fudis-input-size__{{ size }}">
	<fudis-label
		[text]="label"
		[id]="id + '-label'"
		[requiredText]="_required ? _requiredText : undefined"
		[tooltip]="tooltip"
		[tooltipPosition]="tooltipPosition"
		[tooltipToggle]="tooltipToggle">
	</fudis-label>
	<div class="fudis-select__input-wrapper">
		<input
			#inputRef
			(click)="_toggleDropdown()"
			(blur)="_inputBlur()"
			[value]="control.value?.label"
			class="fudis-select__input"
			[class.fudis-form-input--disabled]="disabled"
			[class.fudis-form-input--invalid]="(control.touched && control.invalid) || (control.touched && invalidState)"
			[class.fudis-select__input__dropdown]="variant !== 'autocomplete'"
			[class.fudis-select__input-wrapper__input--invalid]="(control.touched && control.invalid) || invalidState"
			role="combobox"
			aria-haspopup="listbox"
			(keydown)="_handleKeypress($event)"
			[attr.aria-autocomplete]="'none'"
			[attr.aria-disabled]="disabled"
			[attr.placeholder]="placeholder"
			[attr.required]="_required ? true : null"
			[attr.aria-labelledby]="id + '-label'"
			[attr.aria-describedby]="id + '_guidance'"
			[attr.aria-invalid]="(control.touched && control.invalid) || (control.touched && invalidState) ? true : null" />
		<ng-container *ngIf="size !== 'xs'">
			<fudis-icon
				*ngIf="variant !== 'autocomplete'"
				(click)="_toggleDropdown()"
				class="fudis-select__input-wrapper__icon"
				[icon]="'chevron'"
				[rotate]="'cw-90'" />
			<fudis-button
				*ngIf="variant === 'autocomplete'"
				class="fudis-select__input-wrapper__icon-button"
				(handleClick)="_toggleDropdown()"
				[size]="'icon-only'"
				[variant]="'tertiary'"
				[icon]="'chevron'"
				[iconRotate]="_dropdownOpen ? 'ccw-90' : 'cw-90'"
				[label]="!_dropdownOpen ? _openAriaLabel : _closeAriaLabel"
				[labelHidden]="true" />
		</ng-container>
	</div>
	<fudis-select-dropdown
		*ngIf="_firstOpenDone"
		#dropdownRef
		[open]="_dropdownOpen"
		[multiselect]="multiselect"
		[size]="size">
		<ng-content select="fudis-select-option" />
	</fudis-select-dropdown>
	<fudis-guidance
		*ngIf="!disableGuidance"
		[inputLabel]="label"
		[helpText]="helpText"
		[for]="id"
		[errorMsg]="errorMsg"
		[control]="control" />
</div>
