import { ArgTypes, Meta, Canvas } from '@storybook/blocks';
import { linkTo } from '@storybook/addon-links';
import { CheckboxGroupComponent } from './checkbox-group.component';
import * as CheckboxGroupStories from './checkbox-group.stories.ts';

<Meta title="Components/Form/Checkbox Group" />

# Checkbox Group

Checkbox Group is a form fieldset element constructing from `fieldset` `legend` and `<input type="checkbox">` elements.

## Examples

<Canvas of={CheckboxGroupStories.Example}></Canvas>

## Usage Guidelines

#### Mandatory Properties

Necessary properties for Checkbox Group are `title` and `formGroup`.

For child Checkbox elements require `controlName` and `label`. Checkbox's `controlName` must match with the corresponding control in the main `formGroup`.

```
// In HTML template

	<fudis-checkbox-group [formGroup]="myFormGroup" [title]="'Example checkbox group'">
		<fudis-checkbox [controlName]="'firstControlName'" [label]="'First checkbox'"/>
		<fudis-checkbox [controlName]="'secondControlName'" [label]="'Second checkbox'"/>
	</fudis-checkbox-group>


// In TypeScript file

myFormGroup = new FormGroup<FudisCheckboxGroupFormGroup>(
	{
		firstControlName: new FormControl<boolean | null | undefined>(null),
		secondControlName: new FormControl<boolean | null | undefined>(null),
	}
);
```

#### As a required form field

To display visible 'required' text with the fieldset group, set `required` input as true to Checkbox Group and include validator `FudisFormGroupValidators.atLeastOneRequired()` in the validators array of `formGroup`.

```
// In HTML template

<fudis-checkbox-group
	[formGroup]="myFormGroup"
	[title]="'Choose at least one'"
	[required]="true"
	[groupErrorMsg]="{atLeastOneRequired: 'No checkbox checked!'}">
	<fudis-checkbox [controlName]="'firstControlName'" [label]="'You should check this'"/>
	<fudis-checkbox [controlName]="'secondControlName'" [label]="'Or this, or both!'"/>
</fudis-checkbox-group>

// In TypeScript file

myFormGroup = new FormGroup<FudisCheckboxGroupFormGroup>(
	{
		firstControlName: new FormControl<boolean | null | undefined>(null),
		secondControlName: new FormControl<boolean | null | undefined>(null),
	},[FudisFormGroupValidators.atLeastOneRequired()]
);


```


If checkbox-group fieldset is a required form field include `Validators.required` in the form control validators and include a `required` error message in the `errorMsg` property.

#### Minimum and maximum selectable options

If checkbox-group fieldset has minimum and/or maximum options to be selected, form field include `Validators.min` and/or `Validators.max` in the form control validators and include a `min` and/or `max` error message in the `errorMsg` property.

### Error Handling

- **Required** error is shown if checkbox-group fieldset is required and
  - if control is touched and
	  - if control value is null
- **Minimum** error is shown if checkbox-group fieldset is required and
  - if control is touched and
    - if control value is less than the given minimum value
- **Maximum** error is shown if checkbox-group control is touched and
  - if control value is more than the given maximum value

### Accessibility

- Fieldset has a legend as its first child element
- Checkbox options are grouped by name attribute
- Guidance is linked to the checkbox-group via id
- Possible error messages are displayed after user blurs out from the whole checkbox group

## Properties

<ArgTypes of={CheckboxGroupComponent} />
