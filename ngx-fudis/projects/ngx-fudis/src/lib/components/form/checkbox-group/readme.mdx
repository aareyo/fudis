import { ArgTypes, Meta, Canvas } from '@storybook/blocks';
import { linkTo } from '@storybook/addon-links';
import { CheckboxGroupComponent } from './checkbox-group.component';
import * as CheckboxGroupStories from './checkbox-group.stories.ts';

<Meta title="Components/Form/Checkbox Group" />

# Checkbox Group

Checkbox Group is a form fieldset element constructing from `fieldset` `legend` and `<input type="checkbox">` elements.

## Examples

<Canvas of={CheckboxGroupStories.Example}></Canvas>

## Usage Guidelines

#### Mandatory Properties

Necessary properties for Checkbox Group are `title` and `formGroup`.

For child Checkbox elements mandatory properties are `controlName` and `label`. Checkbox's `controlName` must match with the corresponding control in the main `formGroup`.

```
// In HTML template

	<fudis-checkbox-group
	[formGroup]="myFormGroup"
	[title]="'Example checkbox group'">
		<fudis-checkbox
		[controlName]="'firstControlName'"
		[label]="'First checkbox'"/>
		<fudis-checkbox
		[controlName]="'secondControlName'"
		[label]="'Second checkbox'"/>
	</fudis-checkbox-group>


// In TypeScript file

myFormGroup = new FormGroup<FudisCheckboxGroupFormGroup>(
	{
		firstControlName: new FormControl<boolean | null | undefined>(null),
		secondControlName: new FormControl<boolean | null | undefined>(null),
	}
);
```

#### As a required form field and at least one required selection

To display visible 'required' text with the fieldset group, set `required` input as true to Checkbox Group and include validator `FudisGroupValidator.atLeastOneRequired()` in the validators array of `formGroup`.

```
// In HTML template

<fudis-checkbox-group
	[formGroup]="myFormGroup"
	[title]="'Choose at least one'"
	[required]="true">
	<fudis-checkbox
	[controlName]="'first'"
	[label]="'You should check this'"/>
	<fudis-checkbox
	[controlName]="'second'"
	[label]="'Or this, or both!'"/>
</fudis-checkbox-group>

// In TypeScript file

myFormGroup = new FormGroup<FudisCheckboxGroupFormGroup>(
	{
	first: new FormControl<boolean | null | undefined>(null),
	second: new FormControl<boolean | null | undefined>(null),
	},
	[FudisGroupValidator.atLeastOneRequired(new BehaviorSubject('Select at least one checkbox!'))]
);


```

#### Minimum and maximum selection validation

If checkbox-group fieldset has minimum and/or maximum options to be selected, form field include `FudisGroupValidator.min` and/or `FudisGroupValidator.max` in the group validators.

```
// In TypeScript file

myFormGroup = new FormGroup<FudisCheckboxGroupFormGroup>(
	{
		first: new FormControl<boolean | null | undefined>(null),
		second: new FormControl<boolean | null | undefined>(null),
		third: new FormControl<boolean | null | undefined>(null),
		forth: new FormControl<boolean | null | undefined>(null),
	},
	[
		FudisGroupValidator.min({value: 2, message: new BehaviorSubject('Too few selected!')}),
		FudisGroupValidator.max({value: 3, message: new BehaviorSubject('Too many selected!')})
	]
);
```

### Accessibility

- Fieldset has a legend as its first child element
- Checkbox options are grouped by name attribute
- Guidance is linked to the checkbox-group via id
- Possible error messages are displayed after user blurs out from the whole checkbox group

## Properties

<ArgTypes of={CheckboxGroupComponent} />
