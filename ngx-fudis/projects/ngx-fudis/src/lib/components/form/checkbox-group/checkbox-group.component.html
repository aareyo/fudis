<fudis-fieldset
	[id]="_id"
	[titleSize]="'sm'"
	[title]="title"
	[required]="_required ? _required : undefined"
	[errorSummaryBreadcrumb]="false"
	[tooltip]="tooltip"
	[tooltipPosition]="tooltipPosition"
	[tooltipToggle]="tooltipToggle">
	<ng-template fudisContent type="fieldset">
		<fudis-checkbox
			*ngFor="let option of options; let index = index"
			[groupId]="_id"
			[id]="option.id"
			[name]="option.name"
			[value]="option.value"
			[label]="option.label"
			[required]="option.required"
			[checked]="option.checked"
			(handleFocus)="onFocus()"
			[invalidState]="formGroup.invalid && formGroup.touched"
			[control]="$any(formGroup).controls['checkbox' + index]"
			(checkboxChange)="toggleChecked(option.id)"></fudis-checkbox>

		<fudis-guidance
			[inputLabel]="title"
			[helpText]="helpText"
			[for]="_id"
			[groupErrorMsg]="groupErrorMsg"
			[formGroup]="formGroup">
		</fudis-guidance>
	</ng-template>
</fudis-fieldset>
