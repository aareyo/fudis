<div class="fudis-datepicker fudis-input-size__{{ size }}">
  <fudis-label
    [id]="'label_' + id"
    [for]="id"
    [text]="label"
    [requiredText]="_required ? _requiredText : undefined"
    [tooltip]="tooltip"
    [tooltipPosition]="tooltipPosition"
    [tooltipToggle]="tooltipToggle"
  ></fudis-label>
  <div class="fudis-datepicker__input-wrapper">
    <input
      #inputRef
      [id]="id"
      [matDatepicker]="picker"
      (blur)="_handleInputBlur()"
      (keyup)="_handleKeyUp()"
      (dateChange)="_calendarDateChanges($event.value)"
      [min]="_minDate"
      [max]="_maxDate"
      [readonly]="disabled"
      [attr.aria-disabled]="disabled ? true : null"
      class="fudis-form-input fudis-datepicker__input"
      [attr.aria-invalid]="
        (control.touched && control.invalid) || (control.touched && invalidState) ? true : null
      "
      [attr.required]="_required ? true : null"
      [attr.aria-describedby]="id + '_guidance'"
    />
    <mat-datepicker-toggle
      [disabled]="disabled"
      matSuffix
      [for]="picker"
      [disableRipple]="true"
      class="fudis-datepicker__toggle"
    >
      <mat-icon matDatepickerToggleIcon>
        <fudis-icon [icon]="'calendar'" [color]="'primary'"></fudis-icon>
      </mat-icon>
    </mat-datepicker-toggle>
    <mat-datepicker #picker panelClass="fudis-datepicker__datepicker"></mat-datepicker>
  </div>
  <fudis-guidance
    *ngIf="!disableGuidance"
    [formId]="_parentForm?.id || null"
    [inputLabel]="label"
    [reloadErrorSummary]="_reloadErrorSummary"
    [helpText]="helpText"
    [for]="id"
    [control]="control"
  >
    <ng-content />
  </fudis-guidance>
</div>
