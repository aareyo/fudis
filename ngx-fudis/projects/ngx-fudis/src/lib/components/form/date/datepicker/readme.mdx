import { ArgTypes, Meta, Canvas } from '@storybook/blocks';
import { linkTo } from '@storybook/addon-links';
import { DatepickerComponent } from './datepicker.component';
import * as DatepickerStories from './datepicker.stories.ts';

<Meta title="Components/Form/Datepicker" />

# Datepicker

Fudis-datepicker is build using Angular Material Datepicker as a base.
Datepicker allows user to select a date from valid options.

## Examples

<Canvas of={DatepickerStories.Datepicker}></Canvas>

## Usage Guidelines

<br />

### Mandatory properties

Datepicker requires at least `label` and `id` properties for accessibility.

### Validators and Error Handling

Fudis form components use Fudis Validators. See the full documentation on [how to use Fudis Validators](/docs/utilities-validators--documentation). 

If a custom validation is used, read [how to add Error message](/docs/components-form-error-message--documentation).

**Datepicker validators**
- required

### Other validation options

If you need minimum / maximum date selection range, add `min` and/or `max` properties to the component.

Also provide `matDatepickerMin` and `matDatepickerMax` error messages for `errorMsg` property.

For unknown input format provide `matDatepickerParse` value for `errorMsg` property.

```
<fudis-datepicker
	[min]="minDate"
	[max]="maxDate"
	[errorMsg]="{
		matDatepickerMin: 'Date cannot be earlier than X.X.XXXX',
		matDatepickerMax: 'Date cannot be later than X.X.XXX'}
		matDatepickerParse: 'Your input is not a proper date. Please provide it in DD.MM.YYYY format.'"
>
</fudis-datepicker>
```
#### Error Handling

**matDatepickerMin** and/or **matDatepickerMax** error is shown
  - if written date is outside the range of min and max

## Localization

Currently datepicker parses the display date to Finnish format of <code>DD.MM.YYYY</code> and calendar's first day of the week is Monday by default.

The language of the calendar listens to <code>lang</code> attribute value of <code>html</code> element. E. g. `<html lang="fi">`. This localizes date picker calendar to

Current list of languages supported are:

- English, `lang="en"` which translates to ISO language value of 'en-GB'
- Finnish, `lang="fi"` which translates to ISO language value of 'fi-FI'
- Swedish, `lang="sv"` which translates to ISO language value of 'sv-SE'

## Accessibility

- Datepicker has label and id connected to the input
- Guidance and error messages are connected to the input via id
- Datepicker has a visible focus state both on input and calendar icon
- Calendar dialog can be triggered from the calendar icon with keyboard <code>enter</code> and <code>space</code> key
- User can navigate inside the calendar dialog with keyboard <code>arrow</code> keys
- User can type the date directly to the input without opening the calendar dialog
- Input can be focused even if it is disabled

## Related components

[Icon](/docs/components-icon--icon)

[Angular Material Datepicker](https://material.angular.io/components/datepicker/overview)

## Related directives

[Tooltip](/docs/directives-tooltip--tooltip)

## Properties

<ArgTypes of={DatepickerComponent} />
